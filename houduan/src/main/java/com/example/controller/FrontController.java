package com.example.controller;import cn.hutool.crypto.SecureUtil;import com.example.exception.CustomException;import com.example.common.Result;import com.example.common.ResultCode;import com.example.entity.*;import com.example.service.*;import com.example.service.impl.CollectServiceImpl;import com.example.vo.FuwuleibieVo;import com.example.vo.YonghuxinxiVo;import com.example.vo.YuyuejiazhengVo;import com.example.vo.JiazhengfuwuVo;import com.example.vo.YuangongxinxiVo;import com.example.vo.FuwupingjiaVo;import com.example.vo.PinglunVo;import com.example.vo.BianhuantuVo;import com.example.vo.XinwentongzhiVo;import org.springframework.beans.BeanUtils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.*;import javax.annotation.Resource;import javax.servlet.http.HttpServletRequest;import java.util.List;@RestController@RequestMapping(value = "/front")public class FrontController {    @Autowiredprivate FuwuleibieService  fuwuleibieService;@Autowiredprivate YonghuxinxiService  yonghuxinxiService;@Autowiredprivate YuyuejiazhengService  yuyuejiazhengService;@Autowiredprivate JiazhengfuwuService  jiazhengfuwuService;@Autowiredprivate YuangongxinxiService  yuangongxinxiService;@Autowiredprivate FuwupingjiaService  fuwupingjiaService;    @Autowired    private PinglunService pinglunService;	@Autowired    private BianhuantuService  bianhuantuService;    @Autowired    private XinwentongzhiService  xinwentongzhiService;    @Autowired    private LiuyanbanService liuyanbanService;    @Resource    private CollectServiceImpl collectService;    /**     * 修改用户信息     * @param yonghuxinxi     * @return     */    @PostMapping("/updateYongHu")    public Result updateYongHu(@RequestBody YonghuxinxiVo yonghuxinxi) {        yonghuxinxiService.update(yonghuxinxi);        Yonghuxinxi xinxi = new Yonghuxinxi();        BeanUtils.copyProperties(yonghuxinxi, xinxi);        return Result.success(xinxi);    }    /**     * 修改密码     * @param info     * @param request     * @return     */    @PostMapping("/updatePasswordNew")    public Result updatePasswordNew(@RequestBody Yonghuxinxi info, HttpServletRequest request) {        Yonghuxinxi yonghuxinxi = yonghuxinxiService.findById(info.getId());        String oldPassword = SecureUtil.md5(info.getMima());        if (!oldPassword.equals(yonghuxinxi.getMima())) {            return Result.error(ResultCode.PARAM_PASSWORD_ERROR.code, ResultCode.PARAM_PASSWORD_ERROR.msg);        }        info.setMima(SecureUtil.md5(info.getNewPassword()));        Yonghuxinxi yonghuxinxi1 = new Yonghuxinxi();        BeanUtils.copyProperties(info, yonghuxinxi1);        yonghuxinxiService.update(yonghuxinxi1);        return Result.success();    }	@PostMapping("/zhuceyonghuxinxi")public Result zhuceyonghuxinxi(@RequestBody Yonghuxinxi yonghuxinxi) {yonghuxinxiService.add(yonghuxinxi);return Result.success();}@PostMapping("/findyonghuxinxiyonghuming")public Result findyonghuxinxiyonghuming(@RequestBody Yonghuxinxi yonghuxinxi) {yonghuxinxiService.findyonghuxinxiyonghuming(yonghuxinxi);return Result.success();}@PostMapping("/loginyonghuxinxi")public Result loginyonghuxinxi(@RequestBody Yonghuxinxi yonghuxinxi) {return Result.success(yonghuxinxiService.login(yonghuxinxi));}@GetMapping("/getyuyuejiazhengdetail/{id}")public Result getyuyuejiazhengdetail(@PathVariable Integer id) {	return Result.success(yuyuejiazhengService.findById(id));}@GetMapping("/getjiazhengfuwudetail/{id}")public Result getjiazhengfuwudetail(@PathVariable Integer id) {	return Result.success(jiazhengfuwuService.findById(id));}@PostMapping("/jiazhengfuwu")public Result<JiazhengfuwuVo> jiazhengfuwu(@RequestBody JiazhengfuwuVo jiazhengfuwuVo) {return Result.success(jiazhengfuwuService.findPage(jiazhengfuwuVo));}@GetMapping("/getyuangongxinxidetail/{id}")public Result getyuangongxinxidetail(@PathVariable Integer id) {	return Result.success(yuangongxinxiService.findById(id));}@PostMapping("/yuangongxinxi")public Result<YuangongxinxiVo> yuangongxinxi(@RequestBody YuangongxinxiVo yuangongxinxiVo) {return Result.success(yuangongxinxiService.findPage(yuangongxinxiVo));}@PostMapping("/loginyuangongxinxi")public Result loginyuangongxinxi(@RequestBody Yuangongxinxi yuangongxinxi) {return Result.success(yuangongxinxiService.login(yuangongxinxi));}@GetMapping("/getfuwupingjiadetail/{id}")public Result getfuwupingjiadetail(@PathVariable Integer id) {	return Result.success(fuwupingjiaService.findById(id));}@PostMapping("/fuwupingjia")public Result<FuwupingjiaVo> fuwupingjia(@RequestBody FuwupingjiaVo fuwupingjiaVo) {return Result.success(fuwupingjiaService.findPage(fuwupingjiaVo));}		@PostMapping("/postpinglun")    public Result<Pinglun> postpinglun(@RequestBody Pinglun pinglun) {        return Result.success(pinglunService.add(pinglun));    }    @PostMapping("/pinglun")    public Result<PinglunVo> pinglun(@RequestBody PinglunVo pinglunVo) {        return Result.success(pinglunService.findPage(pinglunVo));    }		@GetMapping("/bianhuantu")    public Result bianhuantu() {        return Result.success(bianhuantuService.list());    }       @GetMapping("/xinwentongzhi")    public Result xinwentongzhi() {        return Result.success(xinwentongzhiService.list());    }    @GetMapping("/getxinwentongzhi/{id}")    public Result getxinwentongzhi(@PathVariable Integer id) {        return Result.success(xinwentongzhiService.findById(id));    }    @PostMapping("/addLiuyan")    public Result addComment(@RequestBody Liuyanban liuyanban) {        liuyanbanService.add(liuyanban);        return Result.success();    }    @GetMapping("/getLiuyan")    public Result<List<Liuyanban>> getCommentTiezi() {        return Result.success(liuyanbanService.getLiuyan());    }    @PostMapping("/addCollect")    public Result addCollect(@RequestBody Collect collect) {        Collect collect1 = collectService.add(collect);        if(collect1  == null){            return Result.success("请勿重复收藏");        }        return Result.success();    }    @DeleteMapping("/deleteCollect/{id}")    public Result deleteCollect(@PathVariable Integer id) {        collectService.delete(id);        return Result.success();    }	@PostMapping("/getUserCollect")    public Result getUserCollect(@RequestBody Collect collect) {        return Result.success(collectService.findFrontPages(collect.getUserId()));    }    @DeleteMapping("/deleteCollect/{id}/{userId}")    public Result deleteCollect(@PathVariable Integer id,@PathVariable Integer userId) {        collectService.deleteByUserId(id,userId);        return Result.success();    }		@PutMapping("/fuwuleibie")public Result updateFuwuleibie(@RequestBody FuwuleibieVo fuwuleibie) {fuwuleibieService.update(fuwuleibie);return Result.success();}@PutMapping("/yonghuxinxi")public Result updateYonghuxinxi(@RequestBody YonghuxinxiVo yonghuxinxi) {yonghuxinxiService.update(yonghuxinxi);return Result.success();}@PutMapping("/yuyuejiazheng")public Result updateYuyuejiazheng(@RequestBody YuyuejiazhengVo yuyuejiazheng) {yuyuejiazhengService.update(yuyuejiazheng);return Result.success();}@PutMapping("/jiazhengfuwu")public Result updateJiazhengfuwu(@RequestBody JiazhengfuwuVo jiazhengfuwu) {jiazhengfuwuService.update(jiazhengfuwu);return Result.success();}@PutMapping("/yuangongxinxi")public Result updateYuangongxinxi(@RequestBody YuangongxinxiVo yuangongxinxi) {yuangongxinxiService.update(yuangongxinxi);return Result.success();}@PutMapping("/fuwupingjia")public Result updateFuwupingjia(@RequestBody FuwupingjiaVo fuwupingjia) {fuwupingjiaService.update(fuwupingjia);return Result.success();}}